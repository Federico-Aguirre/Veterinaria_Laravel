const l=document.querySelector.bind(document);document.querySelectorAll.bind(document);document.getElementById.bind(document);document.getElementsByClassName.bind(document);window.matchMedia("(min-width: 800px)");document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("amount"),e=document.getElementById("paypal-button-container");if(!t||!e||typeof paypal>"u"){console.error("PayPal no está disponible o faltan elementos");return}paypal.Buttons({createOrder:function(n,a){return a.order.create({purchase_units:[{amount:{value:t.getAttribute("data-value")}}]})},onApprove:function(n,a){return a.order.capture().then(function(o){fetch("/obtenerCantidadProductosEnCarro").then(i=>i.json()).then(i=>{fetch("/finalizar-compra",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"},body:JSON.stringify({})}).then(r=>r.json()).then(r=>{if(r.success){const c=document.getElementById("contador-carrito");document.querySelector(".carro-container"),c.offsetHeight,alert("Compra realizada con éxito."),window.location.href=r.redirect}else alert("Hubo un error al finalizar la compra.")}).catch(r=>{console.error("Error:",r),alert("Hubo un error al procesar la compra.")})}).catch(i=>{console.error("Error al obtener la cantidad del carrito:",i),alert("Hubo un error al intentar actualizar el carrito.")})})}}).render("#paypal-button-container")});document.addEventListener("DOMContentLoaded",function(){let t=new Date,e=t.getDate(),n=t.getMonth()+1,a=t.getUTCFullYear();e<10&&(e="0"+e),n<10&&(n="0"+n);let o=`${a}-${n}-${e}T00:00`,i=`${a+2}-${n}-${e}T23:59`;const r=l(".turnos__formulario__fecha"),c=document.getElementById("fecha");c&&c.addEventListener("click",function(){c.showPicker()}),r&&(r.setAttribute("min",o),r.setAttribute("max",i),r.setAttribute("step","1800"),r.addEventListener("input",function(){new Date(r.value).getMinutes()%30!==0&&(alert("Solo puedes seleccionar horarios en intervalos de 30 minutos (por ejemplo, 13:00, 13:30, 14:00, etc.)."),r.value="")}),r.addEventListener("change",function(){const p=r.value;fetch("/verificar-turno",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({fecha:p})}).then(d=>d.json()).then(d=>{d.ocupado&&(alert("Ya existe un turno en esta fecha y hora. Por favor, selecciona otra."),r.value="")})}))});const f={keyframes:{navBarClickedLine1:{"50%":{margin:"0 0 -2px 0",transform:"rotate(0)"},"100%":{margin:"0 0 -2px 0",transform:"rotate(50deg) scale(1.3)"}},navBarClickedLine2:{"50%":{margin:"-2px 0 0 0",transform:"rotate(0)"},"100%":{margin:"-2px 0 0 0",transform:"rotate(-50deg) scale(1.3)"}},navBarClosingLine1:{"0%":{margin:"0 0 -2px 0",transform:"rotate(50deg) scale(1.3)"},"50%":{margin:"0 0 -2px 0",transform:"rotate(0)"},"100%":{transform:"rotate(0)",margin:"0",marginTop:"-5px"}},navBarClosingLine2:{"0%":{margin:"-2px 0 0 0",transform:"rotate(-50deg) scale(1.3)"},"50%":{margin:"-2px 0 0 0",transform:"rotate(0)"},"100%":{margin:"0",marginLeft:"10px",marginTop:"5px",transform:"rotate(0)"}},navBarHide:{from:{height:"calc(100vh - 50px)",width:"200px",right:"0"},to:{height:"0vh",width:"0",right:"-20em"}},navBarShow:{from:{height:"0",width:"0",right:"-20em"},to:{height:"calc(100vh - 50px)",width:"200px",right:"0"}},line:{from:{strokeDashoffset:"250"},to:{strokeDashoffset:"0"}}},animation:{navBarClickedLine1:"navBarClickedLine1 0.4s ease forwards",navBarClickedLine2:"navBarClickedLine2 0.4s ease forwards",navBarClosingLine1:"navBarClosingLine1 0.4s ease forwards",navBarClosingLine2:"navBarClosingLine2 0.4s ease forwards",navBarHide:"navBarHide 0.6s ease forwards",navBarShow:"navBarShow 0.6s ease forwards",line:"line 2s ease forwards"},toggleMenuAnimations(t,e,n,a){a?(t.classList.remove("hidden"),t.classList.remove("animate-navBarHide"),t.classList.add("animate-navBarShow"),e.classList.remove("animate-navBarClosingLine1"),n.classList.remove("animate-navBarClosingLine2"),e.classList.add("animate-navBarClickedLine1"),n.classList.add("animate-navBarClickedLine2")):(t.classList.remove("animate-navBarShow"),t.classList.add("animate-navBarHide"),e.classList.remove("animate-navBarClickedLine1"),n.classList.remove("animate-navBarClickedLine2"),e.classList.add("animate-navBarClosingLine1"),n.classList.add("animate-navBarClosingLine2"),setTimeout(()=>{t.classList.add("hidden")},600))},resetMenuAnimations(t,e,n){t.classList.remove("animate-navBarShow","animate-navBarHide"),e.classList.remove("animate-navBarClickedLine1","animate-navBarClosingLine1"),n.classList.remove("animate-navBarClickedLine2","animate-navBarClosingLine2")}},g=l(".header__navBar"),s=l(".navBarMenu"),m=l(".header__navBar__line:nth-of-type(1)"),u=l(".header__navBar__line:nth-of-type(2)");let h=!1,v=!1;!g||!s||!m||!u?console.warn("Faltan elementos necesarios para el menú"):g.addEventListener("click",()=>{h||(h=!0,f.resetMenuAnimations(s,m,u),v?(f.toggleMenuAnimations(s,m,u,!1),setTimeout(()=>{s.classList.add("hidden")},600)):(s.classList.remove("hidden"),f.toggleMenuAnimations(s,m,u,!0)),setTimeout(()=>{h=!1,v=!v},600))});document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("ver-perfil-btn");t&&t.addEventListener("click",function(){fetch("/ver_perfil",{method:"GET",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}}).then(e=>e.json()).then(e=>{let n=`
                    Nombre: ${e.name}
                    Apellido: ${e.Apellido}
                    Dirección: ${e.Dirección}
                    Piso: ${e.Piso}
                    Departamento: ${e.Departamento}
                    Localidad: ${e.Localidad}
                    Teléfono: ${e.Teléfono}
                    Celular: ${e.Celular}
                    Email: ${e.email}
                `;alert(n)}).catch(e=>{console.error("Error:",e),alert("Hubo un error al obtener los datos del perfil.")})})});document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector('meta[name="csrf-token"]');if(!t){console.error("El meta CSRF token no está presente en el DOM.");return}const e=t.getAttribute("content");if(!e){console.error("El atributo content del CSRF token está vacío.");return}const n=document.getElementById("borrarPerfilButton");if(!n){console.error('No se encontró el botón con ID "borrarPerfilButton".');return}n.addEventListener("click",function(){confirm("¿Estás seguro de que deseas borrar tu perfil? Esta acción no se puede deshacer.")&&fetch("/borrar_perfil",{method:"DELETE",headers:{"X-CSRF-TOKEN":e,Accept:"application/json"}}).then(a=>{if(!a.ok)throw new Error("Error en la respuesta del servidor");return a.json()}).then(a=>{alert(a.message||"Perfil borrado exitosamente."),window.location.href="/"}).catch(a=>{console.error("Error:",a),alert("Hubo un problema al borrar el perfil.")})})});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".eliminar-btn").forEach(e=>{e.addEventListener("click",function(n){n.preventDefault();const a=this.dataset.id;confirm("¿Estás seguro de que deseas eliminar este producto del carro?")&&fetch(`/carro/remover/${a}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}}).then(o=>o.json()).then(o=>{if(o.success){document.getElementById(`producto-${a}`).remove();const i=document.getElementById("contador-carrito");i&&o.nuevaCantidad!==void 0&&(i.textContent=o.nuevaCantidad)}else alert(o.message||"Error al eliminar el producto")}).catch(o=>{console.error("Error:",o),alert("Ocurrió un error al intentar eliminar el producto.")})})})});
